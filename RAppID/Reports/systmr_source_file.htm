<HTML>
<pre>/*<br> *######################################################################<br> *                                RAppIDJDP<br> *           Rapid Application Initialization and Documentation Tool<br> *                         Freescale Semiconductor Inc.<br> *<br> *######################################################################<br> *<br> * Project Name           : JJH5606_2<br> *<br> * Project File           : JJH5606_2.rsp<br> *<br> * Revision Number        : 1.0<br> *<br> * Tool Version           : 1.2.1.5<br> *<br> * file                   : swt_init.c<br> *<br> * Target Compiler        : Codewarrior<br> *<br> * Target Part            : MPC5606B<br> *<br> * Part Errata Fixes      : none<br> *<br> * Project Last Save Date : 16-Jan-2015 15:48:11<br> *<br> * Created on Date        : 16-Jan-2015 17:14:35<br> *<br> * Brief Description      : SWT Initialization file<br> *<br> ******************************************************************************** <br> *<br> * Detail Description     : File contains Software Watchdog Timer (SWT) parameter<br> *                         initialization function. The function configures<br> *                         SWT parameters such as watchdog status, watchdog<br> *                         timeout, debug mode control, sleep mode control,<br> *                         window mode status & window value. Also, the file has<br> *                         a function for Watchdog Service Routine.<br> *<br> ******************************************************************************** <br> *<br> *######################################################################<br>*/<br><br> <br> <br>/********************  Dependent Include files here **********************/<br><br>#include "swt_init.h"<br><br><br><br><br>/********************* Initialization Function(s) *********************** */<br><br><br>void swt_init_fnc(void)<br>{<br><br>        vint32_t init_status=0;        <br>        uint32_t delay=100;        <br>        /* Check whether the Hardware is enabled or not    */<br><br>        if(1 != SWT.CR.B.HLK)    <br>        {    <br>            SWT.SR.B.WSC = 0xC520;    <br>            SWT.SR.B.WSC = 0xD928;    <br>            /* Disable Software lock of register by writing sequence register with unlock data     */<br><br><br>            while((1 == SWT.CR.B.SLK) && (0 < (delay--))){}    <br>                /*Wait until Soft-Lock is disabled    */<br><br>            if(1 != SWT.CR.B.SLK)    <br>            {    <br>                    /*Proceed with initialization    */<br><br>                init_status = 0;    <br>            }    <br>            else    <br>            {    <br>                init_status = 1;    <br>                    /**SWT initialization cannot be proceed as software lock is still enabled    */<br><br>            }    <br>        }    <br>        else    <br>        {    <br>            init_status = 1;    <br>                /* SWT initialization cannot be proceed as Hardware lock is still enabled */<br>    <br>        }    <br>        if(0 == init_status)    <br>        {    <br>            SWT.CR.B.WEN =0;    <br>                /* Software Watchdog Timer: Disabled */<br>    <br>            SWT.TO.R = 0x500;    <br>                /* Software Watchdog Timer timeout is 10ms    */<br><br>            SWT.WN.R = 0x0;    <br>                /* Service Sequence window time: 0 ms    */<br><br>            SWT.CR.R = 0x8000010A;    <br>                /* Master Access Control for Master 0: Enabled     */<br>                /* SWT Reset on Invalid Access: Enabled    */<br>                /* SWT Window Mode: Disabled    */<br>                /* SWT Interrupt then Reset: Disabled    */<br>                /* SWT Hard Lock: Disabled    */<br>                /* SWT Soft Lock: Disabled    */<br>                /* SWT Clock Source Selected: IRC 128KHz     */<br>                /* SWT Stop Mode Control: Disabled    */<br>                /* SWT Debug Mode Control: Enabled    */<br>                /* Software Watchdog Timer: Disabled    */<br><br>        }    <br><br>}<br>/********************* SWT Service Sequence Function *********************** */<br>void swt_srvc_seq_fnc(void)<br>{<br><br>        SWT.SR.B.WSC = 0xA602;    <br>        SWT.SR.B.WSC = 0xB480;    <br>}<br><br><br> <br>/*<br> *######################################################################<br> *                           End of File<br> *######################################################################<br>*/<br><br></pre></BODY></HTML>
